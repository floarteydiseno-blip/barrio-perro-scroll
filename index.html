<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Barrio Perro ‚Äì Reveal on Scroll (centrado)</title>

  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Lato:wght@400&display=swap" rel="stylesheet">

  <style>
    :root{
      --overlay: #000000;
      --holeBase: 5vmin;      /* tama√±o base del logo/hueco */
      --dx: 0vmin;            /* ajuste fino X */
      --dy: .15vmin;          /* ajuste fino Y (lo ten√≠as as√≠) */
      --k: 1;                 /* escala din√°mica (JS) */
    }

    html, body{
      margin: 0;
      min-height: 540vh;      /*height: 540vh;           recorrido para scrollear */
      height: auto;     
      background: #000;
      overflow-x: hidden;
    }

    /* Video fijo al fondo */
    #video-bg{
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: 1;
      background:#000;
    }

    /* Overlay con m√°scara */
    svg#overlay{
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      z-index: 2;
      pointer-events: none;
      display: block;
      transition: opacity .5s ease; /* fade controlado por JS */
    }

    /* ====== TEXTO EN HERO ====== */
   #headline{
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 0 6vw;   /* para que no se pegue a los lados */
     
  /* position: fixed;
  inset: 0;
  z-index: 3;              por encima del overlay 
  display: grid;
  place-items: center;     üëà centrado vertical y horizontal 
  pointer-events: none;
                         quitamos align-items:end y padding-bottom */
}

    #headline .line{
      font-family: 'Bebas Neue', sans-serif;
      font-weight: 400;
      letter-spacing: .5px;
      text-transform: uppercase;

      max-width: min(90vw, 1100px);
      text-align: center;
      color: #fff;
      font-size: clamp(26px, 6.8vmin, 68px);
      line-height: 1.05;

      /* estado inicial: abajo y oculto */
      opacity: 0;
      transform: translateY(12vh);
      transition: transform .7s cubic-bezier(.2,.7,0,.99), opacity .6s ease;
    }

    /* FIX: selector correcto (sin el punto extra) */
    body.open #headline .line{
      opacity: 1;
      transform: translateY(0);
    }

    /* ====== SECCI√ìN SIGUIENTE (REVEAL) ====== */
    .section{
      position: relative;
      z-index: 4;
      min-height: 120dvh;
      display: grid;
      place-items: center;
      padding: clamp(24px, 6vmin, 96px);
      background: #000;
    }

    .reveal{
      max-width: min(90vw, 1100px);
      color: #fff;
      text-align: center;
      font-size: clamp(24px, 6vmin, 56px);
      line-height: 1.12;
      opacity: 0;
      transform: translateY(42px);
      transition: transform .8s cubic-bezier(.2,.7,0,.99), opacity .6s ease;
    }

    .reveal.in{
      opacity: 1;
      transform: translateY(0);
    }

    @media (prefers-reduced-motion: reduce){
      .reveal{
        transition: none;
        transform: none !important;
        opacity: 1 !important;
      }
    }

    .bebas{
  font-family: 'Bebas Neue', sans-serif;
  font-weight: 400;
  text-transform: uppercase;
  letter-spacing: .5px;
  line-height: 1.05;
}

.lato{
  font-family: 'Lato', sans-serif;
  font-weight: 400;
  text-transform: none;   /* se queda en min√∫sculas */
  letter-spacing: 0.2px;
  line-height: 1.3;
  font-size: 0.9em;       /* un poco m√°s peque√±o que el t√≠tulo */
}
@media (max-width: 480px){
  #headline .line{
    font-size: 20px;
    line-height: 1.2;
  }
  .lato{
    font-size: 0.85em;
  }
}
    
/* M√≥vil: inicia m√°s grande para que se perciba mejor */
@media (max-width: 600px){
  :root{
    --holeBase: 14vmin;
  }

  /* Texto: margen lateral para que no pegue orillas */
  #headline{ padding: 0 6vw; }
  #headline .line{ font-size: clamp(18px, 7.2vmin, 42px); }
  .lato{ font-size: 0.95em; line-height: 1.35; }
}
    
  </style>
</head>
<body>

  <!-- Video de fondo -->
  <video id="video-bg" autoplay muted loop playsinline preload="auto" poster="poster.jpg">
    <source src="HERO.mp4" type="video/mp4" />
  </video>

  <!-- Overlay con m√°scara ‚Äúknockout‚Äù: blanco=tapa, negro=hueco -->
  <!-- FIX: usa comentarios HTML, no /* ... */ dentro del SVG -->
 
  <svg id="overlay" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid slice" aria-hidden="true">
  <defs>
    <mask id="revealMask">
      <!-- Fondo blanco: visible -->
      <rect x="0" y="0" width="100" height="100" fill="white"/>
      <!-- Logo negro: abre hueco -->
      <image
        href="logo-mask.svg"
        x="50" y="50"
        width="20" height="20"
        preserveAspectRatio="xMidYMid meet"
        style="
          transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy)))
                     scale(var(--k));
          transform-box: fill-box;
          transform-origin: 50% 50%;
        "
        fill="black"/>
    </mask>
  </defs>

  <!-- Rect√°ngulo negro con m√°scara -->
  <rect x="0" y="0" width="100%" height="100%" fill="var(--overlay)" mask="url(#revealMask)"/>
</svg>

  <!-- Texto que aparece cuando el logo ya abri√≥ -->
  <div id="headline" aria-hidden="true">
    <h1 class="line">
      <span class="bebas">Barrio Perro es m√°s que una tienda:</span><br/>
      <span class="lato">es un refugio natural para perros urbanos.</span>
    </h1>
  </div> 

  <!-- Siguiente ‚Äúpantalla‚Äù con efecto reveal desde abajo 
  <section class="section">
    <h2 class="reveal">
      Barrio Perro es m√°s que una tienda: es un refugio natural para perros urbanos.
    </h2>
  </section> -->

  <script>
  (function(){
    /* ===== Par√°metros de apertura ===== */
    const MIN = 1.0;     // escala m√≠nima del logo/hueco
    const MAX = 18;      // escala m√°xima (lo ten√≠as en 18)
    const SPEED = 0.008; // sensibilidad del scroll
    const OPEN_EPS = 0.05;

    const overlay = document.getElementById('overlay');

    // ===== Utilidad =====
    function clamp(v,a,b){ return Math.max(a, Math.min(b, v)); }

    // ===== Scroll principal: sincroniza apertura + texto =====
    function onScroll(){
      const y = window.scrollY || document.documentElement.scrollTop || 0;
      const k = clamp(MIN + y * SPEED, MIN, MAX);

      // Actualiza escala del ‚Äúagujero‚Äù
      document.documentElement.style.setProperty('--k', String(k));

      // Estado abierto/cerrado
      const opened = (k >= MAX - OPEN_EPS);

      // Fade del overlay y entrada del titular (desde abajo)
      overlay.style.opacity = opened ? '0' : '1';

      // Retardo sutil para que termine el fade del overlay
      if (opened) {
        setTimeout(() => document.body.classList.add('open'), 80);
      } else {
        document.body.classList.remove('open');
      }
    }

    // Listeners (NO duplicar)
    window.addEventListener('scroll', onScroll, { passive: true });
    window.addEventListener('load', onScroll);

    // ===== Reveal ‚Äúdesde abajo‚Äù en la secci√≥n siguiente =====
    const io = new IntersectionObserver((entries) => {
      entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('in'); });
    }, { threshold: 0.15, rootMargin: '0px 0px -10%' });

    document.querySelectorAll('.reveal').forEach(el => io.observe(el));
  })();
  </script>
</body>
</html>
