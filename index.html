<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Barrio Perro – Mask + Scroll</title>
  <style>
    /* Página larga para que exista scroll */
    html, body {
      margin: 0;
      height: 200vh;
      background: #000; /* color de fondo mientras carga el video */
    }

    /* Video de fondo */
    #video-bg {
      position: fixed;
      inset: 0;             /* top:0 right:0 bottom:0 left:0 */
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: 1;
      background: #000;     /* si el video no carga, verás negro (útil para detectar) */
    }

    /* Capa sólida que tapa todo y recorta el logo como ventana */
    #mask-layer {
      position: fixed;
      inset: 0;
      z-index: 2;
      background: #ffffff;  /* cambia el color sólido aquí (#000, #fff, etc.) */

      /* La magia de la máscara (asegúrate que la ruta exista) */
      -webkit-mask-image: url('logotipo_barrioperro_02.svg');
      mask-image: url('logotipo_barrioperro_02.svg');
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      /* Tamaño del “hueco” del logo */
      -webkit-mask-size: min(70vmin, 80%);
      mask-size: min(70vmin, 80%);
      transition: transform 0.3s ease;
    }
  </style>
</head>
<body>

  <!-- VIDEO -->
  <video id="video-bg" autoplay muted playsinline loop preload="auto" poster="poster.jpg">
    <source src="barrio-perro-scroll/HERO.mp4" type="video/mp4" />
    <!-- Si no carga, verás el background negro del video -->
  </video>

  <!-- CAPA SÓLIDA CON MÁSCARA DEL LOGO -->
  <div id="mask-layer" aria-hidden="true"></div>

  <script>
    // Efecto scroll: agranda el “hueco” del logo escalando la capa
    window.addEventListener('scroll', function () {
      const scrollY = window.scrollY || document.documentElement.scrollTop || 0;
      const scale = 1 + scrollY * 0.003; // ajusta velocidad si quieres
      const maskLayer = document.getElementById('mask-layer');
      if (maskLayer) maskLayer.style.transform = 'scale(' + scale + ')';
    });

    // Logs útiles para depurar en la consola
    (function debug() {
      const v = document.getElementById('video-bg');
      v.addEventListener('error', () => console.log('⚠️ Error cargando el video'));
      v.addEventListener('loadeddata', () => console.log('✅ Video cargado'));
      fetch('assets/logo-mask.svg')
        .then(r => console.log('SVG status:', r.status))
        .catch(e => console.log('⚠️ Error al pedir SVG', e));
    })();
  </script>
</body>
</html>
