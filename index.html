<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Barrio Perro ‚Äì Reveal on Scroll (centrado)</title>

  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Lato:wght@400&display=swap" rel="stylesheet">

  <style>
    :root{
      --overlay: #000000;
      --holeBase: 5vmin;      /* tama√±o base del logo/hueco (desktop) */
      --dx: 0vmin;            /* ajuste fino X */
      --dy: .15vmin;          /* ajuste fino Y */
      --k: 1;                 /* escala din√°mica (JS) */
    }

    html, body{
      margin: 0;
      background: #000;
      overflow-x: hidden;
      /* En m√≥vil, vh var√≠a con la barra del navegador; usa min-height */
      min-height: 540vh;
      height: auto;
    }

    /* Video fijo al fondo */
    #video-bg{
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: 1;
      background:#000;
    }

    /* Overlay con m√°scara */
    svg#overlay{
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      z-index: 2;
      pointer-events: none;
      display: block;
      transition: opacity .5s ease; /* fade controlado por JS */
      shape-rendering: geometricPrecision; /* nitidez extra */
    }

    /* ====== TEXTO EN HERO ====== */
    #headline{
      position: fixed;
      inset: 0;
      z-index: 3;             /* por encima del overlay */
      display: flex;
      align-items: center;    /* centrado vertical */
      justify-content: center;/* centrado horizontal */
      pointer-events: none;
      padding: 0 5vw;         /* margen lateral para m√≥vil/desktop */
      text-align: center;
    }

    #headline .line{
      /* Primera l√≠nea Bebas + segunda Lato via spans abajo */
      color: #fff;
      max-width: min(90vw, 1100px);
      font-size: clamp(24px, 6.5vmin, 68px);
      line-height: 1.08;

      /* estado inicial: abajo y oculto */
      opacity: 0;
      transform: translateY(12vh);
      transition: transform .7s cubic-bezier(.2,.7,0,.99), opacity .6s ease;
    }

    body.open #headline .line{
      opacity: 1;
      transform: translateY(0);
    }

    .bebas{
      font-family: 'Bebas Neue', sans-serif;
      font-weight: 400;
      text-transform: uppercase;
      letter-spacing: .5px;
      line-height: 1.05;
      display: inline-block;
    }

    .lato{
      font-family: 'Lato', sans-serif;
      font-weight: 400;
      text-transform: none;
      letter-spacing: 0.2px;
      line-height: 1.3;
      font-size: 0.9em; /* un poco m√°s peque√±o que el t√≠tulo */
      display: inline-block;
    }

    /* ====== SECCI√ìN SIGUIENTE (REVEAL) ‚Äì (si la reactivas) ====== */
    .section{
      position: relative;
      z-index: 4;
      min-height: 120dvh;
      display: grid;
      place-items: center;
      padding: clamp(24px, 6vmin, 96px);
      background: #000;
    }

    .reveal{
      max-width: min(90vw, 1100px);
      color: #fff;
      text-align: center;
      font-size: clamp(20px, 6vmin, 56px);
      line-height: 1.18;
      opacity: 0;
      transform: translateY(42px);
      transition: transform .8s cubic-bezier(.2,.7,0,.99), opacity .6s ease;
    }

    .reveal.in{
      opacity: 1;
      transform: translateY(0);
    }

    @media (prefers-reduced-motion: reduce){
      .reveal{
        transition: none;
        transform: none !important;
        opacity: 1 !important;
      }
    }

    /* ====== Ajustes espec√≠ficos para m√≥vil ====== */
    @media (max-width: 600px){
      :root{
        --holeBase: 14vmin;             /* logo inicia m√°s grande en m√≥vil */
      }
      #headline{ padding: 0 6vw; }
      #headline .line{
        font-size: clamp(20px, 7.2vmin, 42px);
        line-height: 1.12;
      }
      .lato{
        font-size: 0.95em;
        line-height: 1.35;
      }
    }
  </style>
</head>
<body>

  <!-- Video de fondo -->
  <video id="video-bg" autoplay muted loop playsinline preload="auto" poster="poster.jpg">
    <source src="HERO.mp4" type="video/mp4" />
  </video>

  <!-- Overlay con m√°scara ‚Äúknockout‚Äù: blanco=tapa, negro=hueco -->
  <svg id="overlay" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid slice" aria-hidden="true">
  <defs>
    <!-- Logo inline con viewBox real -->
    <symbol id="logo-symbol" viewBox="0 0 500 500">
      <!-- üîΩ Todo tu logo en paths üîΩ -->
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.36,4.5c161.72,0,323.43,0,485.14,0c0,162,0,324,0,486c-162,0-324,0-486,0
        c0-161.14,0-322.28,0-483.43C8.43,5.85,8.36,4.64,9.36,4.5z M341.07,22.5c-20.7,24.92-16.16,71.75-38.57,98.57
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M341.93,22.5c7.77,13.37,6.89,35.4,9.43,54
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M60.79,47.36C51.9,63.83,38.09,74.69,35.93,97.93
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M65.93,72.21c-7.72,12.46-19.3,25.64-15.43,44.57
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M400.21,83.36c1.79,3.58,0.58,8.3-1.71,10.29c-2,0-4,0-6,0
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M353.93,152.79c6.51,19.8-1.65,43.93-20.57,41.14
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M320.5,158.79c-0.43,13.85,1.32,29.89-3.43,39.43c-3.91,0.13-3.36,0.71-6.86,0
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M342.79,158.79c4.77,5.51,3.72,23.93-3.43,25.71
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M299.07,186.21c1.58,6.41,6.12,13.5,4.29,20.57c-3.17,0.58-6.05,1.95-8.57,0.86
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M269.93,172.5c5.94,8.53-0.77,18.25-5.14,24c1.29,9.28,6.66,14.49,7.71,24
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M293.07,172.5c3.02,4.72-1.88,10.85-6,8.57
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M219.36,178.5c1.41,7.17,4.16,18.62,6,30.86c2.44,16.24,9.94,36.79-6.86,35.14
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M258.79,181.07c1.07,5.94-3.36,10.9-6.86,9.43
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M171.36,220.5c16.4,30.02-18.78,54.62-49.71,48c-0.27-10.97,2.31-22.53,4.29-35.14
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M327.36,199.07c23.81-2.93,24.78,13.62,24,34.29c-0.51,13.45-0.94,27.15-6,36.86
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M207.36,203.36c2.57,4.31,4.96,12.83-3.43,12.86
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M159.36,208.5c-1.61,4.83-5.17,11.77-12,8.57
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M326.5,217.07c8.61,8.65,3.8,53.94-8.57,52.29
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M273.36,265.93c2.21,8.94,7.14,15.14,7.71,25.71c-2.56,3.44-7.12,4.88-13.71,4.29
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M156.79,236.79c0.13,8.98-4.32,13.39-12,14.57
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M265.64,243.64c0.9,8.62-4.54,14.48-11.14,12.86
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M217.64,280.5c2.34,8.44,13.96,28.49-6,25.71c-4.53-4.9-5.5-13.36-9.43-18.86
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M211.64,260.79c0.56,7.7-1.62,12.66-9.43,12
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M179.93,264.21c1.53,13.25-17.48,5.95-18,17.14c1.34,3.24,8.22,0.92,11.14,2.57
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M125.93,306.21c-4.62,5.67-0.66,19.91-12,18.86c-1.88-12.77,2.27-33.5,6.86-45.43
        ..."/>
      <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M135.36,288.21c-0.24,4.62-2.89,6.83-6.86,7.71
        ..."/>
    </symbol>

    <mask id="revealMask">
      <!-- Fondo blanco = visible -->
      <rect x="0" y="0" width="100" height="100" fill="white"/>
      <!-- Logo en negro = hueco -->
      <g style="transform: translate(var(--dx), var(--dy)) scale(var(--k));
                transform-box: fill-box; transform-origin: 50% 50%;">
        <use href="#logo-symbol"
             x="50" y="50"
             width="var(--holeBase)" height="var(--holeBase)"
             transform="translate(calc(-0.5 * var(--holeBase)), calc(-0.5 * var(--holeBase)))"
             style="fill:black; stroke:black; stroke-width:1;" />
      </g>
    </mask>
  </defs>

  <!-- Rect√°ngulo negro que tapa todo; la m√°scara abre el hueco -->
  <rect x="0" y="0" width="100%" height="100%" fill="var(--overlay)" mask="url(#revealMask)"/>
</svg>


  <!-- Texto que aparece cuando el logo ya abri√≥ -->
  <div id="headline" aria-hidden="true">
    <h1 class="line">
      <span class="bebas">Barrio Perro es m√°s que una tienda:</span><br/>
      <span class="lato">es un refugio natural para perros urbanos.</span>
    </h1>
  </div>

  <!-- (Opcional) Siguiente ‚Äúpantalla‚Äù con efecto reveal
  <section class="section">
    <h2 class="reveal">
      Barrio Perro es m√°s que una tienda: es un refugio natural para perros urbanos.
    </h2>
  </section>
  -->

  <script>
  (function(){
    /* ===== Par√°metros ===== */
    const MIN = 1.0;       // escala m√≠nima del logo/hueco
    const MAX = 18;        // escala m√°xima
    const OPEN_EPS = 0.05; // margen para considerar ‚Äúabierto‚Äù
    const overlay = document.getElementById('overlay');

    // SPEED din√°mico seg√∫n el scroll disponible (mejor en m√≥vil)
    let SPEED = 0.008;     // fallback
    function recomputeSpeed(){
      const doc = document.documentElement;
      const scrollRange = Math.max(1, doc.scrollHeight - window.innerHeight);
      // Apuntar a ‚Äúabrir‚Äù cerca del 80% del scroll disponible
      const target = Math.max(300, Math.floor(scrollRange * 0.8));
      SPEED = (MAX - MIN) / target;
    }

    function clamp(v,a,b){ return Math.max(a, Math.min(b, v)); }

    function onScroll(){
      const y = window.scrollY || document.documentElement.scrollTop || 0;
      const k = clamp(MIN + y * SPEED, MIN, MAX);

      // Escala del ‚Äúagujero‚Äù (logo)
      document.documentElement.style.setProperty('--k', String(k));

      // Fade del overlay + entrada del titular
      const opened = (k >= MAX - OPEN_EPS);
      overlay.style.opacity = opened ? '0' : '1';

      if (opened) {
        // peque√±o retardo para que termine el fade
        if (!document.body.classList.contains('open')) {
          setTimeout(() => document.body.classList.add('open'), 60);
        }
      } else {
        document.body.classList.remove('open');
      }
    }

    // Listeners
    window.addEventListener('resize', () => { recomputeSpeed(); onScroll(); });
    window.addEventListener('orientationchange', () => { recomputeSpeed(); onScroll(); });
    window.addEventListener('scroll', onScroll, { passive: true });
    window.addEventListener('load', () => { recomputeSpeed(); onScroll(); });

    // Reveal ‚Äúdesde abajo‚Äù en la secci√≥n siguiente (si la usas)
    const io = new IntersectionObserver((entries) => {
      entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('in'); });
    }, { threshold: 0.15, rootMargin: '0px 0px -10%' });
    document.querySelectorAll('.reveal').forEach(el => io.observe(el));
  })();
  </script>
</body>
</html>
