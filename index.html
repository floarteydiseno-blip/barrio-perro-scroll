<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Barrio Perro ‚Äì Reveal on Scroll (AR correcto)</title>
  <style>
    :root{
      /* Color de la pantalla */
      --overlay: #000;

      /* Tama√±o del hueco (ANCHO) en vmin: AJUSTA AQU√ç */
      --holeW: 26vmin;

      /* Offsets finos del hueco (para centrar) */
      --ox: 0px;  /* + a la derecha, - a la izquierda */
      --oy: 0px;  /* + hacia abajo, - hacia arriba */
    }

    html, body{
      margin:0;
      height:220vh;        /* espacio para scrollear */
      background:#000;
    }

    /* Video fijo al fondo */
    #video-bg{
      position:fixed; inset:0;
      width:100vw; height:100vh;
      object-fit:cover;
      z-index:1;
      background:#000;
    }

    /* Capa que tapa todo y usa la m√°scara del logo */
    #overlay{
      position:fixed; inset:0;
      z-index:2;
      background:var(--overlay);
      pointer-events:none;

      /* ‚úÖ M√°scara desde archivo KO (fondo blanco, logo negro) */
      -webkit-mask-image: url('logo-mask.svg');
      mask-image: url('logo-mask.svg');

      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;

      /* Centrado con peque√±os ajustes */
      -webkit-mask-position: calc(50% + var(--ox)) calc(50% + var(--oy));
      mask-position: calc(50% + var(--ox)) calc(50% + var(--oy));

      /* üö´ Sin deformaci√≥n: ancho controlado, alto AUTO mantiene proporci√≥n */
      -webkit-mask-size: var(--holeW) auto;
      mask-size: var(--holeW) auto;

      /* Suavidad al cambiar tama√±o */
      transition: -webkit-mask-size .18s ease-out, mask-size .18s ease-out, opacity .3s ease;
    }
  </style>
</head>
<body>

  <!-- Video de fondo -->
  <video id="video-bg" autoplay muted loop playsinline preload="auto" poster="poster.jpg">
    <source src="HERO.mp4" type="video/mp4"/>
  </video>

  <!-- Overlay negro con m√°scara del logo -->
  <div id="overlay" aria-hidden="true"></div>

  <script>
    (function(){
      const root = document.documentElement;

      // Par√°metros del crecimiento del hueco
      const MIN_W = 24;   // vmin inicial aprox.
      const MAX_W = 160;  // vmin al final (abre casi todo)
      const SPEED = 0.10; // sensibilidad del scroll

      function onScroll(){
        const y = window.scrollY || document.documentElement.scrollTop || 0;
        const next = Math.max(MIN_W, Math.min(MAX_W, MIN_W + y * SPEED));
        root.style.setProperty('--holeW', next + 'vmin');
      }

      // Centrado fino (t√≥calos si lo ves corrido)
      // root.style.setProperty('--ox', '0px');
      // root.style.setProperty('--oy', '0px');

      onScroll();
      window.addEventListener('scroll', onScroll, { passive:true });

      // (Opcional) desvanecer overlay al final
      const overlay = document.getElementById('overlay');
      window.addEventListener('scroll', () => {
        const y = window.scrollY || 0;
        const val = MIN_W + y * SPEED;
        overlay.style.opacity = (val >= MAX_W - 1) ? '0' : '1';
      }, { passive:true });
    })();
  </script>
</body>
</html>
